{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Chat Lobby</title>
</head>
<body>
    <h2>Enter a Chat Room</h2>

    <!-- Room name form -->
    <form id="room-name-form">
        <label for="room-name">Room Name:</label>
        <input type="text" id="room-name" name="room_name" required>
        <button type="submit">Join Room</button>
    </form>

    <!-- Chat area for messages -->
    <div id="messages"></div>

    <!-- Message form -->
    <form id="message-form" style="display:none;">
        <input type="text" id="message-input" placeholder="Type a message..." autocomplete="off">
        <button type="submit">Send</button>
    </form>

    <p>Users in room: <span id="user-count">0</span></p>

    <script src="{% static 'chat/js/chat.js' %}"></script>

    <script>
        document.getElementById('room-name-form').onsubmit = function(event) {
            event.preventDefault();
            const roomName = document.getElementById('room-name').value;

            if (roomName) {
                // Set room name as an attribute on <body>
                document.body.setAttribute('room-name-data', roomName);

                // Show the message form after entering the room
                document.getElementById('message-form').style.display = "block";
            }
        };
    </script>
</body>
</html>

